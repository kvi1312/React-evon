{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nconst useHackerNewsAPI = (initialURL, initialData) => {\n  _s();\n\n  const [data, setData] = useState(initialData);\n  const handleFetchData = useRef({}); //useRef luu cac gia tri ben ngoai compo, o truong hop nay la query\n\n  const [loading, setLoading] = useState(true);\n  const [url, setUrl] = useState(initialURL); //useREf for hackerNEw\n\n  const isMounted = useRef(true);\n  useEffect(() => {\n    //\n    return () => {\n      isMounted.current = false; //khi compo bị unmount thì sẽ là giá trị false\n    };\n  }, []);\n\n  handleFetchData.current = async () => {\n    setLoading(true);\n\n    try {\n      const response = await axios.get(url); // console.table(response.data.hits);\n\n      if (isMounted) {\n        setData(response.data || []);\n        setLoading(false);\n      }\n    } catch {\n      setLoading(true);\n      throw new Error(\"something happened with api\");\n    }\n  };\n\n  useEffect(() => {\n    handleFetchData.current();\n  }, [url]);\n  return {\n    setUrl,\n    loading,\n    data\n  };\n};\n\n_s(useHackerNewsAPI, \"632uM8jD2iW2RvUc/s6J/s++IMY=\");\n\nexport default useHackerNewsAPI;","map":{"version":3,"sources":["D:/React-evon/my-app/src/hooks/useHackerNewsAPI.js"],"names":["axios","React","useEffect","useRef","useState","useHackerNewsAPI","initialURL","initialData","data","setData","handleFetchData","loading","setLoading","url","setUrl","isMounted","current","response","get","Error"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,QAAnC,QAAmD,OAAnD;;AAEA,MAAMC,gBAAgB,GAAG,CAACC,UAAD,EAAaC,WAAb,KAA6B;AAAA;;AACpD,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBL,QAAQ,CAACG,WAAD,CAAhC;AACA,QAAMG,eAAe,GAAGP,MAAM,CAAC,EAAD,CAA9B,CAFoD,CAEhB;;AACpC,QAAM,CAACQ,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACS,GAAD,EAAMC,MAAN,IAAgBV,QAAQ,CAACE,UAAD,CAA9B,CAJoD,CAKpD;;AACA,QAAMS,SAAS,GAAGZ,MAAM,CAAC,IAAD,CAAxB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd;AACA,WAAO,MAAM;AACXa,MAAAA,SAAS,CAACC,OAAV,GAAoB,KAApB,CADW,CACgB;AAC5B,KAFD;AAGD,GALQ,EAKN,EALM,CAAT;;AAOAN,EAAAA,eAAe,CAACM,OAAhB,GAA0B,YAAY;AACpCJ,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,QAAI;AACF,YAAMK,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAN,CAAUL,GAAV,CAAvB,CADE,CAEF;;AAEA,UAAIE,SAAJ,EAAe;AACbN,QAAAA,OAAO,CAACQ,QAAQ,CAACT,IAAT,IAAiB,EAAlB,CAAP;AACAI,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,KARD,CAQE,MAAM;AACNA,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA,YAAM,IAAIO,KAAJ,CAAU,6BAAV,CAAN;AACD;AACF,GAdD;;AAgBAjB,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,eAAe,CAACM,OAAhB;AACD,GAFQ,EAEN,CAACH,GAAD,CAFM,CAAT;AAKA,SAAO;AACLC,IAAAA,MADK;AAELH,IAAAA,OAFK;AAGLH,IAAAA;AAHK,GAAP;AAKD,CAzCD;;GAAMH,gB;;AA2CN,eAAeA,gBAAf","sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\n\r\nconst useHackerNewsAPI = (initialURL, initialData) => {\r\n  const [data, setData] = useState(initialData);\r\n  const handleFetchData = useRef({}); //useRef luu cac gia tri ben ngoai compo, o truong hop nay la query\r\n  const [loading, setLoading] = useState(true);\r\n  const [url, setUrl] = useState(initialURL);\r\n  //useREf for hackerNEw\r\n  const isMounted = useRef(true);\r\n\r\n  useEffect(() => {\r\n    //\r\n    return () => {\r\n      isMounted.current = false; //khi compo bị unmount thì sẽ là giá trị false\r\n    };\r\n  }, []);\r\n\r\n  handleFetchData.current = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.get(url);\r\n      // console.table(response.data.hits);\r\n\r\n      if (isMounted) {\r\n        setData(response.data || []);\r\n        setLoading(false);\r\n      }\r\n    } catch {\r\n      setLoading(true);\r\n      throw new Error(\"something happened with api\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleFetchData.current();\r\n  }, [url]);\r\n\r\n\r\n  return {\r\n    setUrl,\r\n    loading,\r\n    data,\r\n  };\r\n};\r\n\r\nexport default useHackerNewsAPI;\r\n"]},"metadata":{},"sourceType":"module"}